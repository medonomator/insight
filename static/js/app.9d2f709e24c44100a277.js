webpackJsonp([1],{Drql:function(t,a){},FmQC:function(t,a){},Guc3:function(t,a){},IMTU:function(t,a){},InLD:function(t,a){},NHnr:function(t,a,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=n("7+uW"),r={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},staticRenderFns:[]},s=n("VU/8")(null,r,!1,null,null,null).exports,i=n("/ocq"),o={render:function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"main"},[n("div",{staticClass:"left-bar"},[n("router-link",{attrs:{to:"/admin/aphorisms"}},[t._v("Афоризмы")]),t._v(" "),n("router-link",{attrs:{to:"/admin/meterials"}},[t._v("Материалы")]),t._v(" "),n("router-link",{attrs:{to:"/admin/subscribers"}},[t._v("Subscribers")]),t._v(" "),n("router-link",{attrs:{to:"/admin/tasks"}},[t._v("Tasks")])],1),t._v(" "),n("router-view")],1)},staticRenderFns:[]};var c=n("VU/8")({},o,!1,function(t){n("FmQC")},"data-v-08c668da",null).exports,u=n("Dd8w"),d=n.n(u),h=n("Xxa5"),l=n.n(h),m=n("exGp"),p=n.n(m),f=n("mtWM"),v=n.n(f),_=function(t){t?v.a.defaults.headers.common.Authorization="Bearer "+t:delete v.a.defaults.headers.common.Authorization},b=function(){return localStorage.token},g={data:function(){return{aphorismData:[],count:0}},mounted:function(){var t=this;return p()(l.a.mark(function a(){var n;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,v.a.get("http://83.166.242.213/v1/admin/aphorisms");case 2:n=a.sent,t.aphorismData=n.data.data,t.count=n.data.count;case 5:case"end":return a.stop()}},a,t)}))()},methods:{authorFilterHandler:function(){var t=p()(l.a.mark(function t(a){var n,e;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=a?"?author="+a:"",t.next=3,v.a.get("http://83.166.242.213/v1/admin/aphorisms"+n);case 3:e=t.sent,this.aphorismData=e.data.data,this.count=e.data.count;case 6:case"end":return t.stop()}},t,this)}));return function(a){return t.apply(this,arguments)}}(),bodyFilterHandler:function(){var t=p()(l.a.mark(function t(a){var n,e;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=a?"?body="+a:"",t.next=3,v.a.get("http://83.166.242.213/v1/admin/aphorisms"+n);case 3:e=t.sent,this.aphorismData=e.data.data,this.count=e.data.count;case 6:case"end":return t.stop()}},t,this)}));return function(a){return t.apply(this,arguments)}}(),deleteAphorism:function(t){var a=this;v.a.delete("http://83.166.242.213/v1/admin/aphorisms",{data:{_id:t}}).then(function(){a.aphorismData=a.aphorismData.filter(function(a){return a._id!==t})})},addAphorism:function(t){var a=this,n=t.author,e=t.body,r=t.tags,s=t.category;v.a.post("http://83.166.242.213/v1/admin/aphorisms",{author:n,body:e,tags:r.split(", "),category:s}).then(function(t){a.aphorismData.unshift({author:n,body:e,tags:r.split(", ").map(function(t){return{name:t}}),_id:t.data._id}),a.$modal.hide("add-aphorism")})},updateAphorism:function(t){var a=this,n=t.author,e=t.body,r=t.tags,s=t._id,i=t.category;v.a.put("http://83.166.242.213/v1/admin/aphorisms",{_id:s,author:n,body:e,tags:r.split(","),category:i}).then(function(){a.aphorismData=a.aphorismData.map(function(t){return t._id===s?d()({},t,{author:n,body:e,tags:r.split(", ").map(function(t){return{name:t}}),_id:s,category:i}):t}),a.$modal.hide("add-aphorism")})},show:function(t,a){this.$modal.show("add-aphorism",{func:this[t],item:a})},hide:function(){this.$modal.hide("add-aphorism")}}},w={render:function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"aphorisms"},[n("div",[t._v("\n    123\n    ")]),t._v(" "),n("input",{staticClass:"add-aphorism",attrs:{type:"button",value:"Добавить"},on:{click:function(a){return t.show("addAphorism")}}}),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("ul",{staticClass:"aphorisms-header"},[a("div",{staticClass:"header-input-filter"}),this._v(" "),a("div",{staticClass:"header-input-filter"})])}]};var y=n("VU/8")(g,w,!1,function(t){n("Guc3")},"data-v-6084a3b0",null).exports,x={data:function(){return{subscribers:[],count:0}},mounted:function(){var t=this;return p()(l.a.mark(function a(){var n;return l.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,v.a.get("http://83.166.242.213/v1/admin/subscribers");case 2:n=a.sent,console.log("============================================================"),console.dir(n.data,{depth:5}),console.log("============================================================"),t.subscribers=n.data.data,t.count=n.data.count;case 8:case"end":return a.stop()}},a,t)}))()}},k={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("h1",[this._v("Subscribers")])])}]};var E=n("VU/8")(x,k,!1,function(t){n("Drql")},"data-v-ef67eb90",null).exports,D={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("h1",[this._v("Materials")])])}]};var $=n("VU/8")({},D,!1,function(t){n("InLD")},"data-v-df1eea64",null).exports,C={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("h1",[this._v("Tasks")])])}]};var F=n("VU/8")({},C,!1,function(t){n("IMTU")},"data-v-7d0ee5e4",null).exports,A={data:function(){return{email:"",password:""}},methods:{auth:function(t){var a=t.email,n=t.password;v.a.post("http://83.166.242.213/user/login",{email:a,password:n}).then(function(t){var a=t.data.token;_(a),function(t){localStorage.token=t}(a),V.push("/admin")}).catch(function(t){alert(t.message),console.log(t)})}}},R={render:function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("form",{staticClass:"form"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"text",name:"email",placeholder:"Email"},domProps:{value:t.email},on:{input:function(a){a.target.composing||(t.email=a.target.value)}}}),t._v(" "),n("br"),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"text",name:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(a){a.target.composing||(t.password=a.target.value)}}}),t._v(" "),n("br"),t._v(" "),n("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(a){return t.auth({email:t.email,password:t.password})}}},[t._v("Primary")])])},staticRenderFns:[]};var U=n("VU/8")(A,R,!1,function(t){n("OR8n")},"data-v-59779591",null).exports;e.a.use(i.a);var L=new i.a({routes:[{path:"/admin",component:c,name:"Main",children:[{path:"aphorisms",component:y,name:"Aphorisms"},{path:"subscribers",component:E,name:"Subscribers"},{path:"meterials",component:$},{path:"tasks",component:F}]},{path:"/admin/login",component:U,name:"Login"}],mode:"history",base:Object({NODE_ENV:"production"}).BASE_URL});L.beforeEach(function(t,a,n){b()?(_(b()),v.a.get("http://83.166.242.213/user/auth").then(function(){n()}).catch(function(){"Login"!==t.name?n({name:"Login"}):n()})):"Login"!==t.name?n({name:"Login"}):n()});var V=L;e.a.config.productionTip=!1,new e.a({el:"#app",router:V,components:{App:s},template:"<App/>"})},OR8n:function(t,a){}},["NHnr"]);
//# sourceMappingURL=app.9d2f709e24c44100a277.js.map