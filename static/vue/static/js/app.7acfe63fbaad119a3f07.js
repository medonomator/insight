webpackJsonp([1],{FsYo:function(t,a){},NHnr:function(t,a,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=n("7+uW"),o=n("C/JF"),s=n("fhbW"),i=n("1e6/");o.c.add(s.a),e.a.component("font-awesome-icon",i.a);var r={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},staticRenderFns:[]};var u=n("VU/8")({name:"App"},r,!1,function(t){n("RJ5R")},null,null).exports,p=n("/ocq"),m={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"header"},[a("router-link",{attrs:{to:"/admin"}},[this._v("Main")]),this._v(" "),a("router-link",{attrs:{to:"/admin/aphorisms"}},[this._v("Aphorisms")])],1)},staticRenderFns:[]};var c=n("VU/8")({name:"Main",data:function(){return{msg:"Welcome to Your Vue.js App"}}},m,!1,function(t){n("tNH2")},"data-v-8dfee54c",null).exports,d=n("Dd8w"),h=n.n(d),l=n("Xxa5"),v=n.n(l),f=n("exGp"),_=n.n(f),g=n("mtWM"),b=n.n(g),w=function(t){t?b.a.defaults.headers.common.Authorization="Bearer "+t:delete b.a.defaults.headers.common.Authorization},y=function(){return localStorage.token},D={data:function(){return{count:0,aphorismInputData:{author:"",body:"",tags:"",_id:""},handler:function(){}}},methods:{beforeOpen:function(t){var a=t.params,n=a.item,e=a.func;n&&(this.aphorismInputData=h()({},n,{tags:n.tags.map(function(t){return t.name}).join(", ")})),this.handler=e},beforeClose:function(){this.aphorismInputData={author:"",body:"",tags:""}}}},x={render:function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("modal",{attrs:{name:"add-aphorism"},on:{"before-close":t.beforeClose,"before-open":t.beforeOpen}},[n("div",{staticClass:"modal-form"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.aphorismInputData.author,expression:"aphorismInputData.author"}],attrs:{type:"text",placeholder:"Автор"},domProps:{value:t.aphorismInputData.author},on:{input:function(a){a.target.composing||t.$set(t.aphorismInputData,"author",a.target.value)}}}),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.aphorismInputData.body,expression:"aphorismInputData.body"}],staticClass:"aphorism-textarea",attrs:{rows:"10",cols:"45",placeholder:"Афоризм"},domProps:{value:t.aphorismInputData.body},on:{input:function(a){a.target.composing||t.$set(t.aphorismInputData,"body",a.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.aphorismInputData.tags,expression:"aphorismInputData.tags"}],attrs:{type:"text",placeholder:"Топик"},domProps:{value:t.aphorismInputData.tags},on:{input:function(a){a.target.composing||t.$set(t.aphorismInputData,"tags",a.target.value)}}}),t._v(" "),n("input",{staticClass:"add-aphorism",attrs:{type:"button",value:"Добавить"},on:{click:function(a){return t.handler(t.aphorismInputData)}}})])])},staticRenderFns:[]};var C={data:function(){return{aphorismData:[],count:0}},components:{"modal-form":n("VU/8")(D,x,!1,function(t){n("FsYo")},null,null).exports},mounted:function(){var t=this;return _()(v.a.mark(function a(){var n;return v.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,b.a.get("http://134.209.163.196/admin/aphorisms");case 2:n=a.sent,t.aphorismData=n.data.data,t.count=n.data.count;case 5:case"end":return a.stop()}},a,t)}))()},methods:{headerFilter:function(){var t=_()(v.a.mark(function t(a){var n;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.get("http://134.209.163.196/admin/aphorisms?"+a.target.name+"="+a.target.value);case 2:n=t.sent,this.aphorismData=n.data.data,this.count=n.data.count;case 5:case"end":return t.stop()}},t,this)}));return function(a){return t.apply(this,arguments)}}(),deleteAphorism:function(t){var a=this;b.a.delete("http://134.209.163.196/admin/aphorisms",{data:{_id:t}}).then(function(n){a.aphorismData=a.aphorismData.filter(function(a){return a._id!==t})})},addAphorism:function(t){var a=this,n=t.author,e=t.body,o=t.tags;b.a.post("http://134.209.163.196/admin/aphorisms",{author:n,body:e,tags:o.split(", ")}).then(function(t){a.aphorismData.unshift({author:n,body:e,tags:o.split(", ").map(function(t){return{name:t}}),_id:t.data._id}),a.$modal.hide("add-aphorism")})},updateAphorism:function(t){var a=this,n=t.author,e=t.body,o=t.tags,s=t._id;b.a.put("http://134.209.163.196/admin/aphorisms",{_id:s,author:n,body:e,tags:o.split(",")}).then(function(t){a.aphorismData=a.aphorismData.map(function(t){return t._id===s?h()({},t,{author:n,body:e,tags:o.split(", ").map(function(t){return{name:t}}),_id:s}):t}),a.$modal.hide("add-aphorism")})},show:function(t,a){this.$modal.show("add-aphorism",{func:this[t],item:a})},hide:function(){this.$modal.hide("add-aphorism")}}},k={render:function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",[n("div",[n("strong",[t._v(t._s(this.count))]),t._v(" Aphorisms\n  ")]),t._v(" "),n("modal-form"),t._v(" "),n("input",{staticClass:"add-aphorism",attrs:{type:"button",value:"Добавить"},on:{click:function(a){return t.show("addAphorism")}}}),t._v(" "),n("ul",{staticClass:"aphorisms-header"},[n("div",{staticClass:"aphorisms-header-item"},[n("b",[t._v("Автор")]),t._v(" "),n("input",{staticClass:"aphorisms-filter",attrs:{name:"author",type:"text"},on:{input:t.headerFilter}})]),t._v(" "),n("div",{staticClass:"aphorisms-header-item"},[n("b",[t._v("Афоризм")]),t._v(" "),n("input",{staticClass:"aphorisms-filter",attrs:{name:"body",type:"text"},on:{input:t.headerFilter}})]),t._v(" "),t._m(0)]),t._v(" "),t._l(this.aphorismData,function(a){return n("ul",{key:a._id,staticClass:"aphorisms"},[n("li",{staticClass:"aphorisms-item"},[n("span",{staticClass:"aphorisms-author"},[t._v(t._s(a.author))]),t._v(" "),n("span",{staticClass:"aphorisms-body"},[t._v(t._s(a.body))]),t._v(" "),n("div",{staticClass:"aphorisms-tags"},t._l(a.tags,function(a,e){return n("span",{key:e},[t._v(t._s(a.name))])}),0),t._v(" "),n("font-awesome-icon",{staticClass:"icon-pencil",attrs:{icon:"pen"},on:{click:function(n){return t.show("updateAphorism",a)}}}),t._v(" "),n("span",{staticClass:"aphorisms-delete",on:{click:function(n){return t.deleteAphorism(a._id)}}},[t._v("+")])],1)])})],2)},staticRenderFns:[function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",{staticClass:"aphorisms-header-item"},[n("b",[t._v("limit")]),t._v(" "),n("select",[t._v("\n        e\n        "),n("option",[t._v("100")]),t._v(" "),n("option",[t._v("200")]),t._v(" "),n("option",[t._v("500")]),t._v(" "),n("option",[t._v("Все")])])])}]};var I=n("VU/8")(C,k,!1,function(t){n("ew3Y")},"data-v-08b76eab",null).exports,A={data:function(){return{email:"",password:""}},methods:{auth:function(t){var a=t.email,n=t.password;b.a.post("http://134.209.163.196/user/login",{email:a,password:n}).then(function(t){var a=t.data.token;w(a),function(t){localStorage.token=t}(a),N.push("/admin")}).catch(function(t){return console.log(t)})}}},$={render:function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"input",attrs:{name:"email",type:"text"},domProps:{value:t.email},on:{input:function(a){a.target.composing||(t.email=a.target.value)}}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"input",attrs:{name:"password",type:"text"},domProps:{value:t.password},on:{input:function(a){a.target.composing||(t.password=a.target.value)}}}),t._v(" "),n("input",{staticClass:"auth",attrs:{type:"button",value:"Войти"},on:{click:function(a){return t.auth({email:t.email,password:t.password})}}})])},staticRenderFns:[]};var F=n("VU/8")(A,$,!1,function(t){n("NLEu")},"data-v-7c9a8890",null).exports;e.a.use(p.a);var N=new p.a({routes:[{path:"/admin",name:"Main",component:c},{path:"/admin/login",name:"LoginPage",component:F},{path:"/admin/aphorisms",name:"Aphorisms",component:I}],mode:"history"});N.beforeEach(function(t,a,n){var e=function(a){t.path!==a&&n(a),n()};y()?(w(y()),b.a.get("http://134.209.163.196/user/auth").then(function(){return e("/admin")}).catch(function(){return e("/admin/login")})):e("/admin/login"),console.log("Routing...")});var R=n("rifk"),E=n.n(R);e.a.use(E.a),e.a.config.productionTip=!1,new e.a({el:"#app",router:N,components:{App:u},template:"<App/>"})},NLEu:function(t,a){},RJ5R:function(t,a){},ew3Y:function(t,a){},tNH2:function(t,a){}},["NHnr"]);
//# sourceMappingURL=app.7acfe63fbaad119a3f07.js.map